{% if recent %}
  <section>
    <h2 class="text-2xl font-bold text-primary my-3">Últimas Noticias</h2>
    {% if pagination.total > 1 and pagination.current > 1 %}
      <div class="mb-4">
        <span class="text-sm text-text-subtle">Página {{ pagination.current }} de {{ pagination.total }}</span>
      </div>
    {% endif %}
    <div class="grid grid-cols-1 gap-6">
      {% for post in recent %}
        <article class="bg-surface p-6 rounded-lg shadow-md flex flex-col lg:flex-row border border-border">
          {% if post.thumbnail %}
            {% set responsive_thumb = post.thumbnail|responsive_image %}
            <div class="lg:w-1/4 mb-4 lg:mb-0 lg:mr-6">
              <a href="{{ post.link }}"><img src="{{ responsive_thumb.src }}" srcset="{{ responsive_thumb.srcset }}" sizes="(max-width: 767px) calc(100vw - 4rem), (min-width: 768px) 15vw" alt="{{ responsive_thumb.alt }}" class="w-full h-48 md:h-full object-cover rounded" width="{{ responsive_thumb.width }}" height="{{ responsive_thumb.height }}" {{ responsive_thumb.lazy_attr|raw }} /></a>
            </div>
          {% endif %}

          <div class="{{ post.thumbnail ? 'lg:w-3/4' : 'w-full' }}">
            <h3 class="font-title font-bold text-xl mb-2 mt-1"><a href="{{ post.link }}" class="text-text hover:text-primary-h">{{ post.title }}</a></h3>
            <div>
              <ul class="flex space-x-2 mb-2 items-start">
                <li>
                  <span class="text-primary text-sm">{{ post.firma_sender }}</span>
                </li>
                <li>
                  <span class="text-primary text-sm">{{ post.post_date|date('j F Y') }}</span>
                </li>
              </ul>
            </div>
            <p class="text-text hidden md:block">
              {% set excerpt_words = post.excerpt|split(' ') %}
              {% set excerpt_length = 30 %}
              {% if (excerpt_words|length) > excerpt_length %}
                {{ excerpt_words|slice(0, excerpt_length)|join(' ') }}... <a href="{{ post.link }}" class="text-primary hover:underline">Leer más</a>
              {% else %}
                {{ post.excerpt }}
              {% endif %}
            </p>

            {% include 'components/post-tags.twig' %}
          </div>
        </article>
      {% endfor %}
    </div>

    {% include 'components/pagination.twig' %}
  </section>
{% endif %}
